#!/bin/sh
echo 'IyEvYmluL3NoIC1ldXgKCnNsb3BweV9zc2goKSB7CiAgICAvdXNyL2Jpbi9zc2ggLW9CYXRjaE1vZGU9eWVzIC1vIFRDUEtlZXBBbGl2ZT15ZXMgLW8gU2VydmVyQWxpdmVJbnRlcnZhbD0zMCAtbyBTZXJ2ZXJBbGl2ZUNvdW50TWF4PTMwIC1vIENvbm5lY3RUaW1lb3V0PTMwIC1vIENvbm5lY3Rpb25BdHRlbXB0cz0zMCAtbyBVc2VyS25vd25Ib3N0c0ZpbGU9L2Rldi9udWxsIC1vIFN0cmljdEhvc3RLZXlDaGVja2luZz1ubyAtbyBMb2dMZXZlbD1lcnJvciAiJEAiOwp9CgpzbG9wcHlfc2NwKCkgewogICAgL3Vzci9iaW4vc2NwIC1vQmF0Y2hNb2RlPXllcyAtbyBUQ1BLZWVwQWxpdmU9eWVzIC1vIFNlcnZlckFsaXZlSW50ZXJ2YWw9MzAgLW8gU2VydmVyQWxpdmVDb3VudE1heD0zMCAtbyBDb25uZWN0VGltZW91dD0zMCAtbyBDb25uZWN0aW9uQXR0ZW1wdHM9MzAgLW8gVXNlcktub3duSG9zdHNGaWxlPS9kZXYvbnVsbCAtbyBTdHJpY3RIb3N0S2V5Q2hlY2tpbmc9bm8gLW8gTG9nTGV2ZWw9ZXJyb3IgIiRAIjsKfQoKUkVHSVNUUllfRE9NQUlOPXJlZ2lzdHJ5LndvcmtzaG9wLmJyZWRhLmxvY2FsOwpSRUdJU1RSWV9JUD1IT1NUX0lQOwpDRVJUU19QQVRIPX4vLmNlcnRzOwoKbWFpbigpIHsKICAgIGdldEt1YmVjb25maWdGcm9tIG1hc3RlcjsKICAgIGdlbmVyYXRlQ2VydHNJbiAiJENFUlRTX1BBVEgiCiAgICBydW5Eb2NrZXJSZWdpc3RyeSAiJFJFR0lTVFJZX0lQIjsKICAgIHNldFVwQ2VydHNPbiAiJENFUlRTX1BBVEgiIG1hc3RlcjsKICAgIHNldFVwQ2VydHNPbiAiJENFUlRTX1BBVEgiIG5vZGUwMTsKICAgIHNldFVwRXRjSG9zdHNPbiBtYXN0ZXI7CiAgICBzZXRVcEV0Y0hvc3RzT24gbm9kZTAxOwp9CgpnZXRLdWJlY29uZmlnRnJvbSgpIHsKICAgIEhPU1Q9IiQxIjsKICAgIHNsb3BweV9zY3Agcm9vdEAiJEhPU1QiOi9yb290Ly5rdWJlL2NvbmZpZyB+Ly5rdWJlLzsKfQoKc2V0VXBFdGNIb3N0c09uKCkgewogICAgc2xvcHB5X3NzaCByb290QCIkSE9TVCIgImVjaG8gJyR7UkVHSVNUUllfSVB9JyAnJHtSRUdJU1RSWV9ET01BSU59JyA+PiAvZXRjL2hvc3RzIgp9CgpydW5Eb2NrZXJSZWdpc3RyeSgpIHsKICAgIEhPU1Q9IiQxIjsKICAgIHNsb3BweV9zc2ggcm9vdEAiJEhPU1QiICJcCiAgICAgICAgZG9ja2VyIHJ1biAtZCAtcCA1MDAwOjUwMDAgXAogICAgICAgICAgICAtdiAvcm9vdC9jZXJ0czovY2VydHMgXAogICAgICAgICAgICAtZSBSRUdJU1RSWV9IVFRQX1RMU19DRVJUSUZJQ0FURT0vY2VydHMvJFJFR0lTVFJZX0RPTUFJTi5jcnQgXAogICAgICAgICAgICAtZSBSRUdJU1RSWV9IVFRQX1RMU19LRVk9L2NlcnRzLyRSRUdJU1RSWV9ET01BSU4ua2V5IFwKICAgICAgICAgICAgLXYgL29wdC9yZWdpc3RyeS9kYXRhOi92YXIvbGliL3JlZ2lzdHJ5IFwKICAgICAgICAgICAgLS1uYW1lIHJlZ2lzdHJ5IHJlZ2lzdHJ5OjI7IFwKICAgICI7Cn0KCmdlbmVyYXRlQ2VydHNJbigpIHsKICAgIGV4cG9ydCBSRUdJU1RSWV9ET01BSU47CiAgICBDRVJUU19QQVRIPSIkMSI7CiAgICBta2RpciAtcCAiJENFUlRTX1BBVEgiOwogICAgKAogICAgICAgIHNldCAtZXU7CiAgICAgICAgY2QgIiRDRVJUU19QQVRIIgogICAgICAgICMgR2VuZXJhdGUgYSByb290IGtleQogICAgICAgIG9wZW5zc2wgZ2VucnNhIC1vdXQgcm9vdENBLmtleTsKICAgICAgICAjIEdlbmVyYXRlIGEgcm9vdCBjZXJ0aWZpY2F0ZQogICAgICAgIG9wZW5zc2wgcmVxIC14NTA5IC1uZXcgLW5vZGVzIC1rZXkgcm9vdENBLmtleSAtZGF5cyAzNjUgXAogICAgICAgICAgICAtc3ViaiAiL0M9VUsvU1Q9VEVTVC9MPVRFU1QvTz1URVNUL0NOPSR7UkVHSVNUUllfRE9NQUlOfSIgXAogICAgICAgICAgICAtb3V0IHJvb3RDQS5jcnQ7CiAgICAgICAgIyBHZW5lcmF0ZSBrZXkgZm9yIGhvc3QKICAgICAgICBvcGVuc3NsIGdlbnJzYSAtb3V0ICR7UkVHSVNUUllfRE9NQUlOfS5rZXk7CiAgICAgICAgIyBHZW5lcmF0ZSBDU1IKICAgICAgICBvcGVuc3NsIHJlcSAtbmV3IC1rZXkgJHtSRUdJU1RSWV9ET01BSU59LmtleSBcCiAgICAgICAgICAgIC1zdWJqICIvQz1VSy9TVD1URVNUL0w9VEVTVC9PPVRFU1QvQ049JHtSRUdJU1RSWV9ET01BSU59IiBcCiAgICAgICAgICAgIC1vdXQgJHtSRUdJU1RSWV9ET01BSU59LmNzcjsKICAgICAgICAjIFNpZ24gY2VydGlmaWNhdGUgcmVxdWVzdAogICAgICAgIG9wZW5zc2wgeDUwOSAtcmVxIC1pbiAke1JFR0lTVFJZX0RPTUFJTn0uY3NyIC1DQSByb290Q0EuY3J0IC1DQWtleSByb290Q0Eua2V5IC1DQWNyZWF0ZXNlcmlhbCAtZGF5cyAzNjUgLW91dCAke1JFR0lTVFJZX0RPTUFJTn0uY3J0OwogICAgKQp9CgpzZXRVcENlcnRzT24oKSB7CiAgICBleHBvcnQgUkVHSVNUUllfRE9NQUlOOwogICAgQ0VSVFNfUEFUSD0iJDEiOwogICAgSE9TVD0iJDIiOwogICAgc2xvcHB5X3NzaCByb290QCIkSE9TVCIgIlwKICAgICAgICBta2RpciAtcCAvdXNyL2xvY2FsL3NoYXJlL2NhLWNlcnRpZmljYXRlcy8ke1JFR0lTVFJZX0RPTUFJTn07IFwKICAgICAgICBta2RpciAtcCAvZXRjL2RvY2tlci9jZXJ0cy5kLyR7UkVHSVNUUllfRE9NQUlOfTsgXAogICAgIjsKICAgIHNsb3BweV9zY3AgIiRDRVJUU19QQVRIIi9yb290Q0EuY3J0IHJvb3RAIiRIT1NUIjovdXNyL2xvY2FsL3NoYXJlL2NhLWNlcnRpZmljYXRlcy8ke1JFR0lTVFJZX0RPTUFJTn07CiAgICBzbG9wcHlfc2NwICIkQ0VSVFNfUEFUSCIvcm9vdENBLmNydCByb290QCIkSE9TVCI6L2V0Yy9kb2NrZXIvY2VydHMuZC8ke1JFR0lTVFJZX0RPTUFJTn0vY2EuY3J0OwogICAgc2xvcHB5X3NjcCAtciAiJENFUlRTX1BBVEgiIHJvb3RAIiRIT1NUIjovcm9vdC9jZXJ0czsKICAgIHNsb3BweV9zc2ggcm9vdEAiJEhPU1QiICJcCiAgICAgICAgdXBkYXRlLWNhLWNlcnRpZmljYXRlczsgXAogICAgICAgIHN1ZG8gc2VydmljZSBkb2NrZXIgcmVzdGFydDsgXAogICAgIjsKfQoKbWFpbjsK' |
    base64 --decode | sed 's/HOST_IP/[[KATACODA_HOST]]/g' > /opt/setup.sh;
chmod +x /opt/setup.sh;
